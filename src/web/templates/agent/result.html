<div class="space-y-4">
  <!-- Answer -->
  <div class="card bg-base-100 shadow">
    <div class="card-body">
      <h2 class="card-title text-lg">Answer</h2>
      <p class="whitespace-pre-wrap">{{ answer }}</p>
      {% if stopped_by_max_steps %}
      <div class="alert alert-warning mt-2">
        <span>Agent reached maximum steps ({{ total_steps }})</span>
      </div>
      {% endif %}
    </div>
  </div>

  <!-- Steps -->
  {% if steps %}
  <div>
    <h3 class="text-lg font-semibold mb-2">Steps ({{ total_steps }})</h3>
    <div class="space-y-2">
      {% for step in steps %}
      <div class="collapse collapse-arrow bg-base-200 {% if step.is_error %}border border-error{% endif %}">
        <input type="checkbox" />
        <div class="collapse-title font-medium">
          Step {{ loop.index }}:
          {% if step.action %}
          <span class="badge badge-primary">{{ step.action }}</span>
          {% else %}
          <span class="badge badge-ghost">Thinking</span>
          {% endif %}
        </div>
        <div class="collapse-content space-y-2">
          <div>
            <span class="font-semibold text-sm">Thought:</span>
            <p class="text-sm whitespace-pre-wrap">{{ step.thought }}</p>
          </div>
          {% if step.action %}
          <div>
            <span class="font-semibold text-sm">Action:</span>
            <code class="text-sm">{{ step.action }}({{ step.action_input }})</code>
          </div>
          {% endif %}
          {% if step.observation %}
          <div>
            <span class="font-semibold text-sm">Observation:</span>
            <p class="text-sm whitespace-pre-wrap {% if step.is_error %}text-error{% endif %}">{{ step.observation }}</p>
          </div>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}
</div>
