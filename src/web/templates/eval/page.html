{% extends "base.html" %}

{% block title %}Eval - {{ app_name }}{% endblock %}

{% block content %}
<div class="flex flex-col gap-6">
  <div class="flex justify-between items-center">
    <h1 class="text-2xl font-bold">Eval Dashboard</h1>
    <a href="/web/eval/datasets" class="btn btn-outline btn-sm">Manage Datasets</a>
  </div>

  <!-- Run evaluation form -->
  <div class="card bg-base-100 shadow">
    <div class="card-body">
      <h2 class="card-title">Run Evaluation</h2>
      {% if datasets %}
      <form
        hx-post="/web/eval/run"
        hx-target="#eval-result"
        hx-swap="innerHTML"
        hx-indicator="#loading-indicator"
        class="space-y-4"
      >
        <div class="form-control">
          <label class="label" for="dataset_id">
            <span class="label-text">Dataset</span>
          </label>
          <select id="dataset_id" name="dataset_id" class="select select-bordered" required>
            <option value="" disabled selected>Select a dataset</option>
            {% for item in datasets %}
            <option value="{{ item.dataset.id }}">{{ item.dataset.name }} ({{ item.example_count }} examples)</option>
            {% endfor %}
          </select>
        </div>
        <button type="submit" class="btn btn-primary">Run Evaluation</button>
      </form>
      {% else %}
      <p class="text-base-content/60">
        No datasets available.
        <a href="/web/eval/datasets/create" class="link link-primary">Create a dataset</a>
        to get started.
      </p>
      {% endif %}
    </div>
  </div>

  <!-- Results area -->
  <div id="eval-result"></div>
</div>
{% endblock %}
